feat: add streamlit web interface and parameter controls

import streamlit as st
import torch
from PIL import Image
import os
from main_function import style_transfer, load_image, im_convert

st.set_page_config(page_title="AI è‰ºæœ¯é£æ ¼è¿ç§»ç³»ç»Ÿ", layout="wide")

st.title("ğŸ¨ æ™ºèƒ½å›¾åƒé£æ ¼è¿ç§»åˆ›ä½œå¹³å°")
st.markdown("æœ¬ç³»ç»ŸåŸºäº VGG19 æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œå®ç°å†…å®¹ä¸è‰ºæœ¯é£æ ¼çš„å®Œç¾èåˆã€‚")

with st.sidebar:
    st.header("âš™ï¸ å‚æ•°è®¾ç½®")
    epochs = st.slider("è¿­ä»£è½®æ•° (å½±å“è´¨é‡ä¸é€Ÿåº¦)", 50, 1000, 300)
    alpha = st.number_input("å†…å®¹æƒé‡ (Alpha)", value=1.0)
    beta = st.number_input("é£æ ¼æƒé‡ (Beta)", value=1e6)

col1, col2 = st.columns(2)

with col1:
    content_file = st.file_uploader("ä¸Šä¼ å†…å®¹å›¾ç‰‡", type=['jpg', 'png', 'webp'])
    if content_file:
        st.image(content_file, caption="åŸå›¾é¢„è§ˆ", use_column_width=True)

with col2:
    # é¢„è®¾å‡ ä¸ªé£æ ¼
    style_option = st.selectbox("é€‰æ‹©è‰ºæœ¯é£æ ¼", ["æ¢µé«˜-æ˜Ÿç©º", "æ¯•åŠ ç´¢", "æ°´å¢¨ç”»", "è‡ªå®šä¹‰ä¸Šä¼ "])

    if style_option == "è‡ªå®šä¹‰ä¸Šä¼ ":
        style_file = st.file_uploader("ä¸Šä¼ é£æ ¼å›¾ç‰‡", type=['jpg', 'png', 'webp'])
    else:
        style_file = f"styles/{style_option}.jpg"

if st.button("ğŸš€ å¼€å§‹æ™ºèƒ½åŒ–ç”Ÿæˆ"):
    if content_file and style_file:
        with st.spinner("AI æ­£åœ¨è®¡ç®—ä¸­ï¼Œè¯·ç¨å€™..."):
            # ä¿å­˜ä¸´æ—¶æ–‡ä»¶ä¾›ç®—æ³•è¯»å–
            with open("temp_content.jpg", "wb") as f:
                f.write(content_file.getbuffer())

            style_transfer("temp_content.jpg", style_file, "output.jpg", epochs, alpha, beta)

            st.success("ç”ŸæˆæˆåŠŸï¼")
            st.image("output.jpg", caption="é£æ ¼åŒ–ç»“æœ", use_column_width=True)

            with open("output.jpg", "rb") as file:
                st.download_button("ğŸ’¾ ä¸‹è½½è‰ºæœ¯ä½œå“", file, "art_result.jpg")
    else:
        st.warning("è¯·å…ˆä¸Šä¼ å›¾ç‰‡ã€‚")
